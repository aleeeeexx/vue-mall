webpackJsonp([3],{"22O3":function(t,n,e){"use strict";var a=e("mvHQ"),i=e.n(a),o=window.localStorage;n.a={set:function(t,n){void 0!==n&&o.setItem(t,function(t){return i()(t)}(n))},get:function(t,n){var e=function(t){if("string"!=typeof t)return;try{return JSON.parse(t)}catch(n){return t||void 0}}(o.getItem(t));return void 0===e?n:e},remove:function(t){o.removeItem(t)},clear:function(){o.clear()}}},"5xQb":function(t,n){},AWzI:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("/l8+"),i=e("Fk3l"),o={name:"CategoryHeader",components:{baseNavbar:a.a,baseSearch:i.a},methods:{goToSearch:function(){this.$router.push("/search")},getQuery:function(t){console.log(t)}}},s={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("base-navbar",{staticClass:"header"},[e("base-search",{attrs:{slot:"center",fake:""},on:{query:t.getQuery},nativeOn:{click:function(n){return t.goToSearch(n)}},slot:"center"}),t._v(" "),e("i",{staticClass:"iconfont iconxinxi",attrs:{slot:"right"},slot:"right"})],1)},staticRenderFns:[]};var r=e("VU/8")(o,s,!1,function(t){e("5xQb")},"data-v-7f1f7c48",null).exports,c=e("8MDr"),d={name:"CategoryTab",components:{baseScroll:c.a},data:function(){return{items:[{name:"热门推荐",id:"WQR2006"},{name:"慕淘超市",id:"WQ1968"},{name:"国际名牌",id:"WQ1969"},{name:"奢侈品",id:"WQ1970"},{name:"全球购",id:"WQ1971"},{name:"男装",id:"WQ1972"},{name:"女装",id:"WQ1973"},{name:"男鞋",id:"WQ1974"},{name:"女鞋",id:"WQ1975"},{name:"内衣配饰",id:"WQ1976"},{name:"箱包手袋",id:"WQ1977"},{name:"美妆个护",id:"WQ1978"},{name:"钟表珠宝",id:"WQ1979"},{name:"手机数码",id:"WQ1980"},{name:"电脑办公",id:"WQ1981"},{name:"家用电器",id:"WQ1982"},{name:"食品生鲜",id:"WQ1983"},{name:"酒水饮料",id:"WQ1984"},{name:"母婴童鞋",id:"WQ1985"},{name:"玩具乐器",id:"WQ1986"},{name:"医药保健",id:"WQ1987"},{name:"计生情趣",id:"WQ1988"},{name:"运动户外",id:"WQ1989"},{name:"汽车用品",id:"WQ1990"},{name:"家居厨具",id:"WQ1991"},{name:"家具家装",id:"WQ1992"},{name:"礼品鲜花",id:"WQ1993"},{name:"宠物生活",id:"WQ1994"},{name:"生活旅行",id:"WQ1995"},{name:"图书音像",id:"WQ1996"},{name:"邮币",id:"WQ1997"},{name:"农资绿植",id:"WQ1998"},{name:"特产馆",id:"WQ1999"},{name:"慕淘金融",id:"WQ2000"},{name:"拍卖",id:"WQ2001"},{name:"房产",id:"WQ2008"},{name:"二手商品",id:"WQ2002"}],curId:""}},methods:{switchTab:function(t){this.curId!==t&&(this.curId=t,this.$emit("switch-tab",t))}},created:function(){this.switchTab(this.items[0].id)}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("base-scroll",{attrs:{scrollbar:!1}},[e("ul",{staticClass:"tab"},t._l(t.items,function(n,a){return e("li",{key:a,staticClass:"tab-item",class:{"tab-active-item":n.id===t.curId},on:{click:function(e){return t.switchTab(n.id)}}},[t._v("\n      "+t._s(n.name)+"\n    ")])}),0)])},staticRenderFns:[]};var u=e("VU/8")(d,l,!1,function(t){e("fdT4")},"data-v-75541d50",null).exports,m=e("//Fk"),f=e.n(m),h=e("odKQ"),v=e("fJiA"),p=e("mtWM"),g=e.n(p),b=e("T452"),C=g.a.CancelToken,Q=void 0,W=e("22O3"),y={name:"CategoryContent",components:{baseLoading:h.a,baseScroll:c.a,baseBacktop:v.a},data:function(){return{isBacktopVisible:!1,content:{},isLoading:!1}},props:{curId:{type:String,default:""}},methods:{backToTop:function(t){this.$refs.scroll&&this.$refs.scroll.scrollToTop(t)},getContent:function(t){var n=this,e=W.a.get("mall-category-content-key"),a=void 0,i=(new Date).getTime();return e&&e[t]?(a=e[t].updateTime||0,i-a<=864e5?this.getContentByLocalStorage(e[t]):this.getContentByHTTP(t).then(function(){n.updateLocalStorage(e,t,i)})):this.getContentByHTTP(t).then(function(){n.updateLocalStorage(e,t,i)})},updateLocalStorage:function(t,n,e){(t=t||{})[n]={},t[n].data=this.content,t[n].updateTime=e,W.a.set("mall-category-content-key",t)},getContentByLocalStorage:function(t){return this.content=t.data,f.a.resolve()},getContentByHTTP:function(t){var n=this;return function(t){return Q&&Q("取消了前一次的请求！"),Q=null,g.a.get("http://www.imooc.com/api/category/content/"+t,{timeout:b.c,cancelToken:new C(function(t){Q=t})}).then(function(t){if(t.data.code===b.b)return console.log("ok"),t.data.content;throw new Error("没有成功获取到数据！")}).catch(function(t){g.a.isCancel(t),console.log(t)})}(t).then(function(t){return new f.a(function(e){t&&(n.content=t,e())})})},updateScroll:function(){this.$refs.scroll&&this.$refs.scroll.update()}},watch:{curId:function(t){var n=this;this.isLoading=!0,this.getContent(t).then(function(){n.isLoading=!1,n.backToTop(0)})}}},_={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content-wrapper"},[t.isLoading?e("div",{staticClass:"loading-container"},[e("div",{staticClass:"loading-wrapper"},[e("base-loading")],1)]):t._e(),t._v(" "),e("base-scroll",{ref:"scroll"},[e("div",{staticClass:"content"},[t.content.banner?e("div",{staticClass:"pic"},[e("a",{staticClass:"pic-link",attrs:{href:t.content.banner.linkUrl}},[e("img",{staticClass:"pic-img",attrs:{src:t.content.banner.picUrl,alt:""},on:{load:t.updateScroll}})])]):t._e(),t._v(" "),t._l(t.content.data,function(n,a){return e("div",{key:a,staticClass:"section"},[e("h4",{staticClass:"section-title"},[t._v(t._s(n.name))]),t._v(" "),e("ul",{staticClass:"section-list"},t._l(n.itemList,function(n,a){return e("li",{key:a,staticClass:"section-item"},[e("a",{staticClass:"section-link",attrs:{href:""}},[n.picUrl?e("p",{staticClass:"section-pic"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.picUrl,expression:"item.picUrl"}],staticClass:"section-img",attrs:{alt:""}})]):t._e(),t._v(" "),e("p",{staticClass:"section-name"},[t._v(t._s(n.name))])])])}),0)])})],2)])],1)},staticRenderFns:[]};var w={name:"Category",components:{CategoryHeader:r,CategoryTab:u,CategoryContent:e("VU/8")(y,_,!1,function(t){e("dtGs")},"data-v-0054854a",null).exports},data:function(){return{curId:""}},methods:{getCurId:function(t){this.curId=t}}},T={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"category"},[n("header",{staticClass:"g-header-container"},[n("category-header")],1),this._v(" "),n("div",{staticClass:"g-content-container"},[n("div",{staticClass:"sidebar"},[n("category-tab",{on:{"switch-tab":this.getCurId}})],1),this._v(" "),n("div",{staticClass:"main"},[n("category-content",{attrs:{curId:this.curId}})],1)])])},staticRenderFns:[]};var k=e("VU/8")(w,T,!1,function(t){e("fLrH")},"data-v-35c6a7c2",null);n.default=k.exports},IIKi:function(t,n){},T452:function(t,n,e){"use strict";e.d(n,"b",function(){return a}),e.d(n,"c",function(){return i}),e.d(n,"d",function(){return o}),e.d(n,"a",function(){return s});var a=0,i=1e4,o={param:"callback",timeout:i},s=[{num:1,hotword:"篮球鞋"},{num:2,hotword:"任天堂labo"},{num:3,hotword:"索尼降噪豆"},{num:4,hotword:"airpods"},{num:5,hotword:"精工手表"},{num:6,hotword:"莱卡相机"},{num:7,hotword:"运动水壶"},{num:8,hotword:"Aleeeeex"},{num:9,hotword:"NBA门票"}]},dtGs:function(t,n){},fJiA:function(t,n,e){"use strict";var a={name:"baseBacktop",props:{visible:{type:Boolean,default:!1}},methods:{backToTop:function(){this.$emit("backtop")}}},i={render:function(){var t=this.$createElement,n=this._self._c||t;return n("transition",{attrs:{name:"base-backtop"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"base-backtop",attrs:{href:""},on:{click:this.backToTop}},[n("i",{staticClass:"iconfont iconfanhuidingbu"})])])},staticRenderFns:[]};var o=e("VU/8")(a,i,!1,function(t){e("IIKi")},"data-v-0c4c7836",null);n.a=o.exports},fLrH:function(t,n){},fdT4:function(t,n){},mvHQ:function(t,n,e){t.exports={default:e("qkKv"),__esModule:!0}},qkKv:function(t,n,e){var a=e("FeBl"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=3.82beed116c7c94a03b2e.js.map